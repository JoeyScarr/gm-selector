<!doctype html>
<html ng-app="app">
  <head>
		<meta charset="utf-8"> 
		<link rel="stylesheet" type="text/css" href="css/lib/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="css/chart.css">
		<link rel="stylesheet" type="text/css" href="css/main.css">
		<!-- Load Angular now -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.7/angular.min.js"></script>
		<title>Ground Motion Selector</title>
  </head>
  <body ng-controller="MainCtrl">
    <div class="mainbody">
			<h2>Ground Motion Selector</h2>
			<p>Description goes here.</p>
			<hr />
			<select ng-model="databaseName" ng-options="db.name as db.label for db in databases">
				<option value="">-- Choose database --</option>
			</select>
			<span ng-show="dbLoading">
				<img alt="Loading database..." src="images/ajax-loader.gif" style="vertical-align: top" />
			</span>
			<span ng-show="dbLoaded">
				<img alt="Database loaded." src="images/tick.png" style="vertical-align: top" />
				<p>First line of database:</p>
				<pre>{{ databaseData }}</pre>
			</span>
			<hr />
      <input type="file" id="inputFileSelect" />
			<div ng-show="!!input">
				Weights:
				<div ng-repeat="IMi in input.IMi">
					{{ IMi.name }}: <input type="number" min="0" step="any" ng-model="IMi.weighting" />
				</div>
				<input class="btn btn-primary" type="button" ng-disabled="!dbLoaded" ng-click="selectGMs()" value="Select Ground Motions" />
				<pre ng-show="!!selectionOutputString">{{ selectionOutputString }}</pre>
			</div>
			<hr />
			<h2 ng-show="chartData.length > 0">GCIM Charts</h2>
			<div ng-show="!!SAChartData">
				<chart id="'SAchart'" data="SAChartData" scale="log" width="700px" height="400px"></chart>
			</div>
			<div ng-repeat="chart in chartData" style="display:inline-block">
				<chart id="'chart' + $index" data="chart" scale="linear" width="700px" height="400px"></chart>
				<hr />
			</div>
      <!-- <pre>{{ inputJsonString }}</pre> -->
    </div>
		
		
		<!-- Load scripts other than Angular at the end -->
		<script src="js/lib/seedrandom-min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/d3/3.0.8/d3.min.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/chart.js"></script>
    <script src="js/controller.js"></script>
    <script src="js/parsing.js"></script>
    <script src="js/selection.js"></script>
    <script src="js/util.js"></script>
  </body>
</html>
